<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <meta ac-app-id="101" />
    <style>
        .square1,
        .square2,
        .square3 {
            width: 100px;
            height: 100px;
            background-color: red;
            font-size: 20px;
            font-weight: bold;
            color: #fff;
            position: relative;
            z-index: 1;
        }
        .square3 {
            top: 100px;
        }
        .square1 {
            top: 300px;
        }
        .square2 {
            top: 800px;
        }
    </style>
</head>
<body ac-page-id="001">
    <div class="square1" ac-exp="01"></div>
    <div class="square2" ac-exp="02"></div>
    <script>
        window.onload = () => {
            const _hmt = window.aeTracker;
            _hmt.registerBeforeCreateParams(() => {
                console.log('before create params');
            });
            _hmt.registerBeforeUpload((params) => {
                return `${params}&custom=1`
            });
            _hmt.registerAfterUpload((url, data) => {
                console.log('after upload\n', url, data);
            });
            _hmt.registerOnError((error) => {
                console.log('on error\n', error);
            });
            if (!_hmt) {
                return;
            }
            _hmt.sendPV();

            
            const addDom = () => {
                const div = document.createElement('div');
                div.setAttribute('ac-exp', '03');
                div.innerHTML = '我是新加的dom';
                div.classList.add('square3');
                document.body.insertBefore(div, document.body.firstChild);
                _hmt.collectAppear()
            }
            addDom()
        }
    </script>

</body>
</html>